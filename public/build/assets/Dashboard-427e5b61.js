import{e as X,T as oe,g as Le,s as Me,i as Pe,a as De,b as Oe,c as Y,n as p,m as M,d as fe,u as Ke,f as Re,h as ie,j as $e,F as Ne,k as O,t as se,l as je,p as j,I as U,C as Fe,r as pe,w as G,o as K,q as He,v as We,x as Xe,H as Ye,y as re,_ as qe}from"./TabbarLayout-96f9dc38.js";import{c as Ue,C as Je,L as Ze}from"./index-f29eec59.js";import{l as Ge,m as C,p as q,q as Qe,h as R,s as et,x as ve,y as W,z as tt,a as o,A as Q,d as nt,i as lt,B as at,T as ot,C as it,f as st,u as rt,b as ce,w as ct,F as ut,D as dt,o as ft,X as vt}from"./app-4ebb1adc.js";import{u as ge}from"./use-id-07a0b852.js";function he(e){const n=Ge();n&&X(n.proxy,e)}function gt(e,n){return e>n?"horizontal":n>e?"vertical":""}function ht(){const e=C(0),n=C(0),l=C(0),i=C(0),a=C(0),s=C(0),w=C(""),b=C(!0),f=()=>w.value==="vertical",v=()=>w.value==="horizontal",g=()=>{l.value=0,i.value=0,a.value=0,s.value=0,w.value="",b.value=!0};return{move:B=>{const V=B.touches[0];l.value=(V.clientX<0?0:V.clientX)-e.value,i.value=V.clientY-n.value,a.value=Math.abs(l.value),s.value=Math.abs(i.value);const _=10;(!w.value||a.value<_&&s.value<_)&&(w.value=gt(a.value,s.value)),b.value&&(a.value>oe||s.value>oe)&&(b.value=!1)},start:B=>{g(),e.value=B.touches[0].clientX,n.value=B.touches[0].clientY},reset:g,startX:e,startY:n,deltaX:l,deltaY:i,offsetX:a,offsetY:s,direction:w,isVertical:f,isHorizontal:v,isTap:b}}function me(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function mt(e,n){if(me(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function bt(e,n){return new Promise(l=>{const i=n.validator(e,n);if(Pe(i)){i.then(l);return}l(i)})}function ue(e,n){const{message:l}=n;return De(l)?l(e,n):l||""}function xt({target:e}){e.composing=!0}function de({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function yt(e,n){const l=Le();e.style.height="auto";let i=e.scrollHeight;if(Oe(n)){const{maxHeight:a,minHeight:s}=n;a!==void 0&&(i=Math.min(i,a)),s!==void 0&&(i=Math.max(i,s))}i&&(e.style.height=`${i}px`,Me(l))}function wt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function z(e){return[...e].length}function J(e,n){return[...e].slice(0,n).join("")}const[Ct,S]=Y("field"),ee={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:p,formatter:Function,clearIcon:M("clear"),modelValue:fe(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:M("focus"),formatTrigger:M("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},It=X({},Ue,ee,{rows:p,type:M("text"),rules:Array,autosize:[Boolean,Object],labelWidth:p,labelClass:Ke,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var kt=q({name:Ct,props:It,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:l}){const i=ge(),a=Qe({status:"unvalidated",focused:!1,validateMessage:""}),s=C(),w=C(),b=C(),{parent:f}=Re(Ne),v=()=>{var t;return String((t=e.modelValue)!=null?t:"")},g=t=>{if(O(e[t]))return e[t];if(f&&O(f.props[t]))return f.props[t]},k=R(()=>{const t=g("readonly");if(e.clearable&&!t){const d=v()!=="",u=e.clearTrigger==="always"||e.clearTrigger==="focus"&&a.focused;return d&&u}return!1}),E=R(()=>b.value&&l.input?b.value():e.modelValue),B=t=>t.reduce((d,u)=>d.then(()=>{if(a.status==="failed")return;let{value:m}=E;if(u.formatter&&(m=u.formatter(m,u)),!mt(m,u)){a.status="failed",a.validateMessage=ue(m,u);return}if(u.validator)return me(m)&&u.validateEmpty===!1?void 0:bt(m,u).then(y=>{y&&typeof y=="string"?(a.status="failed",a.validateMessage=y):y===!1&&(a.status="failed",a.validateMessage=ue(m,u))})}),Promise.resolve()),V=()=>{a.status="unvalidated",a.validateMessage=""},_=()=>n("endValidate",{status:a.status,message:a.validateMessage}),r=(t=e.rules)=>new Promise(d=>{V(),t?(n("startValidate"),B(t).then(()=>{a.status==="failed"?(d({name:e.name,message:a.validateMessage}),_()):(a.status="passed",d(),_())})):d()}),h=t=>{if(f&&e.rules){const{validateTrigger:d}=f.props,u=se(d).includes(t),m=e.rules.filter(y=>y.trigger?se(y.trigger).includes(t):u);m.length&&r(m)}},x=t=>{var d;const{maxlength:u}=e;if(O(u)&&z(t)>+u){const m=v();if(m&&z(m)===+u)return m;const y=(d=s.value)==null?void 0:d.selectionEnd;if(a.focused&&y){const I=[...t],T=I.length-+u;return I.splice(y-T,T),I.join("")}return J(t,+u)}return t},A=(t,d="onChange")=>{const u=t;t=x(t);const m=z(u)-z(t);if(e.type==="number"||e.type==="digit"){const I=e.type==="number";t=je(t,I,I)}let y=0;if(e.formatter&&d===e.formatTrigger){const{formatter:I,maxlength:T}=e;if(t=I(t),O(T)&&z(t)>+T&&(t=J(t,+T)),s.value&&a.focused){const{selectionEnd:H}=s.value,ae=J(u,H);y=z(I(ae))-z(ae)}}if(s.value&&s.value.value!==t)if(a.focused){let{selectionStart:I,selectionEnd:T}=s.value;if(s.value.value=t,O(I)&&O(T)){const H=z(t);m?(I-=m,T-=m):y&&(I+=y,T+=y),s.value.setSelectionRange(Math.min(I,H),Math.min(T,H))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},P=t=>{t.target.composing||A(t.target.value)},c=()=>{var t;return(t=s.value)==null?void 0:t.blur()},$=()=>{var t;return(t=s.value)==null?void 0:t.focus()},D=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&yt(t,e.autosize)},be=t=>{a.focused=!0,n("focus",t),W(D),g("readonly")&&c()},xe=t=>{a.focused=!1,A(v(),"onBlur"),n("blur",t),!g("readonly")&&(h("onBlur"),W(D),pe())},te=t=>n("clickInput",t),ye=t=>n("clickLeftIcon",t),we=t=>n("clickRightIcon",t),Ce=t=>{j(t),n("update:modelValue",""),n("clear",t)},ne=R(()=>{if(typeof e.error=="boolean")return e.error;if(f&&f.props.showError&&a.status==="failed")return!0}),Ie=R(()=>{const t=g("labelWidth"),d=g("labelAlign");if(t&&d!=="top")return{width:ie(t)}}),ke=t=>{t.keyCode===13&&(!(f&&f.props.submitOnEnter)&&e.type!=="textarea"&&j(t),e.type==="search"&&c()),n("keypress",t)},le=()=>e.id||`${i}-input`,Ve=()=>a.status,Se=()=>{const t=S("control",[g("inputAlign"),{error:ne.value,custom:!!l.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(l.input)return o("div",{class:t,onClick:te},[l.input()]);const d={id:le(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${i}-label`:void 0,onBlur:xe,onFocus:be,onInput:P,onClick:te,onChange:de,onKeypress:ke,onCompositionend:de,onCompositionstart:xt};return e.type==="textarea"?o("textarea",d,null):o("input",Q(wt(e.type),d),null)},Te=()=>{const t=l["left-icon"];if(e.leftIcon||t)return o("div",{class:S("left-icon"),onClick:ye},[t?t():o(U,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Be=()=>{const t=l["right-icon"];if(e.rightIcon||t)return o("div",{class:S("right-icon"),onClick:we},[t?t():o(U,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ae=()=>{if(e.showWordLimit&&e.maxlength){const t=z(v());return o("div",{class:S("word-limit")},[o("span",{class:S("word-num")},[t]),nt("/"),e.maxlength])}},Ee=()=>{if(f&&f.props.showErrorMessage===!1)return;const t=e.errorMessage||a.validateMessage;if(t){const d=l["error-message"],u=g("errorMessageAlign");return o("div",{class:S("error-message",u)},[d?d({message:t}):t])}},_e=()=>{const t=g("labelWidth"),d=g("labelAlign"),u=g("colon")?":":"";if(l.label)return[l.label(),u];if(e.label)return o("label",{id:`${i}-label`,for:l.input?void 0:le(),onClick:m=>{j(m),$()},style:d==="top"&&t?{width:ie(t)}:void 0},[e.label+u])},ze=()=>[o("div",{class:S("body")},[Se(),k.value&&o(U,{ref:w,name:e.clearIcon,class:S("clear")},null),Be(),l.button&&o("div",{class:S("button")},[l.button()])]),Ae(),Ee()];return he({blur:c,focus:$,validate:r,formValue:E,resetValidation:V,getValidationStatus:Ve}),et(Fe,{customValue:b,resetValidation:V,validateWithTrigger:h}),ve(()=>e.modelValue,()=>{A(v()),V(),h("onChange"),W(D)}),tt(()=>{A(v(),e.formatTrigger),W(D)}),$e("touchstart",Ce,{target:R(()=>{var t;return(t=w.value)==null?void 0:t.$el})}),()=>{const t=g("disabled"),d=g("labelAlign"),u=Te(),m=()=>{const y=_e();return d==="top"?[u,y].filter(Boolean):y||[]};return o(Je,{size:e.size,class:S({error:ne.value,disabled:t,[`label-${d}`]:d}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ie.value,valueClass:S("value"),titleClass:[S("label",[d,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:u&&d!=="top"?()=>u:null,title:m,value:ze,extra:l.extra})}}});const Vt=G(kt),[St,F]=Y("key"),Tt=o("svg",{class:F("collapse-icon"),viewBox:"0 0 30 24"},[o("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),Bt=o("svg",{class:F("delete-icon"),viewBox:"0 0 32 22"},[o("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var Z=q({name:St,props:{type:String,text:p,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:n,slots:l}){const i=C(!1),a=ht(),s=v=>{a.start(v),i.value=!0},w=v=>{a.move(v),a.direction.value&&(i.value=!1)},b=v=>{i.value&&(l.default||j(v),i.value=!1,n("press",e.text,e.type))},f=()=>{if(e.loading)return o(Ze,{class:F("loading-icon")},null);const v=l.default?l.default():e.text;switch(e.type){case"delete":return v||Bt;case"extra":return v||Tt;default:return v}};return()=>o("div",{class:F("wrapper",{wider:e.wider}),onTouchstartPassive:s,onTouchmovePassive:w,onTouchend:b,onTouchcancel:b},[o("div",{role:"button",tabindex:0,class:F([e.color,{large:e.large,active:i.value,delete:e.type==="delete"}])},[f()])])}});const[At,L]=Y("number-keyboard"),Et={show:Boolean,title:String,theme:M("default"),zIndex:p,teleport:[String,Object],maxlength:fe(1/0),modelValue:M(""),transition:K,blurOnClose:K,showDeleteKey:K,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:K,safeAreaInsetBottom:K,extraKey:{type:[String,Array],default:""}};function _t(e){for(let n=e.length-1;n>0;n--){const l=Math.floor(Math.random()*(n+1)),i=e[n];e[n]=e[l],e[l]=i}return e}var zt=q({name:At,inheritAttrs:!1,props:Et,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:n,slots:l,attrs:i}){const a=C(),s=()=>{const r=Array(9).fill("").map((h,x)=>({text:x+1}));return e.randomKeyOrder&&_t(r),r},w=()=>[...s(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],b=()=>{const r=s(),{extraKey:h}=e,x=Array.isArray(h)?h:[h];return x.length===1?r.push({text:0,wider:!0},{text:x[0],type:"extra"}):x.length===2&&r.push({text:x[0],type:"extra"},{text:0},{text:x[1],type:"extra"}),r},f=R(()=>e.theme==="custom"?b():w()),v=()=>{e.show&&n("blur")},g=()=>{n("close"),e.blurOnClose&&v()},k=()=>n(e.show?"show":"hide"),E=(r,h)=>{if(r===""){h==="extra"&&v();return}const x=e.modelValue;h==="delete"?(n("delete"),n("update:modelValue",x.slice(0,x.length-1))):h==="close"?g():x.length<+e.maxlength&&(n("input",r),n("update:modelValue",x+r))},B=()=>{const{title:r,theme:h,closeButtonText:x}=e,A=l["title-left"],P=x&&h==="default";if(r||P||A)return o("div",{class:L("header")},[A&&o("span",{class:L("title-left")},[A()]),r&&o("h2",{class:L("title")},[r]),P&&o("button",{type:"button",class:[L("close"),Ye],onClick:g},[x])])},V=()=>f.value.map(r=>{const h={};return r.type==="delete"&&(h.default=l.delete),r.type==="extra"&&(h.default=l["extra-key"]),o(Z,{key:r.text,text:r.text,type:r.type,wider:r.wider,color:r.color,onPress:E},h)}),_=()=>{if(e.theme==="custom")return o("div",{class:L("sidebar")},[e.showDeleteKey&&o(Z,{large:!0,text:e.deleteButtonText,type:"delete",onPress:E},{delete:l.delete}),o(Z,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:E},null)])};return ve(()=>e.show,r=>{e.transition||n(r?"show":"hide")}),e.hideOnClickOutside&&He(a,v,{eventName:"touchstart"}),()=>{const r=B(),h=o(ot,{name:e.transition?"van-slide-up":""},{default:()=>[lt(o("div",Q({ref:a,style:We(e.zIndex),class:L({unfit:!e.safeAreaInsetBottom,"with-title":!!r}),onAnimationend:k,onTouchstartPassive:Xe},i),[r,o("div",{class:L("body")},[o("div",{class:L("keys")},[V()]),_()])]),[[at,e.show]])]});return e.teleport?o(it,{to:e.teleport},{default:()=>[h]}):h}}});const Lt=G(zt),[Mt,N,Pt]=Y("search"),Dt=X({},ee,{label:String,shape:M("square"),leftIcon:M("search"),clearable:K,actionText:String,background:String,showAction:Boolean});var Ot=q({name:Mt,props:Dt,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:l,attrs:i}){const a=ge(),s=C(),w=()=>{l.action||(n("update:modelValue",""),n("cancel"))},b=c=>{c.keyCode===13&&(j(c),n("search",e.modelValue))},f=()=>e.id||`${a}-input`,v=()=>{if(l.label||e.label)return o("label",{class:N("label"),for:f()},[l.label?l.label():e.label])},g=()=>{if(e.showAction){const c=e.actionText||Pt("cancel");return o("div",{class:N("action"),role:"button",tabindex:0,onClick:w},[l.action?l.action():c])}},k=()=>{var c;return(c=s.value)==null?void 0:c.blur()},E=()=>{var c;return(c=s.value)==null?void 0:c.focus()},B=c=>n("blur",c),V=c=>n("focus",c),_=c=>n("clear",c),r=c=>n("clickInput",c),h=c=>n("clickLeftIcon",c),x=c=>n("clickRightIcon",c),A=Object.keys(ee),P=()=>{const c=X({},i,re(e,A),{id:f()}),$=D=>n("update:modelValue",D);return o(Vt,Q({ref:s,type:"search",class:N("field"),border:!1,onBlur:B,onFocus:V,onClear:_,onKeypress:b,onClickInput:r,onClickLeftIcon:h,onClickRightIcon:x,"onUpdate:modelValue":$},c),re(l,["left-icon","right-icon"]))};return he({focus:E,blur:k}),()=>{var c;return o("div",{class:N({"show-action":e.showAction}),style:{background:e.background}},[(c=l.left)==null?void 0:c.call(l),o("div",{class:N("content",e.shape)},[v(),P()]),g()])}}});const Kt=G(Ot);const Rt={class:"w-full h-[calc(100vh-50px)] overflow-y-auto pt-4 px-4 pb-6 bg-gray-200 flex-1 flex flex-col"},$t=dt('<div class="w-full mt-4 text-sm flex flex-wrap"><div class="px-1 mr-2 mb-1 rounded-lg bg-blue-400">当日总量：200</div><div class="px-1 mr-2 mb-1 rounded-lg bg-gray-400">已接通：13</div><div class="px-1 mr-2 mb-1 rounded-lg bg-green-400">已同意：1</div><div class="px-1 mr-2 mb-1 rounded-lg bg-red-400">直接挂断: 90</div><div class="px-1 mr-2 mb-1 rounded-lg bg-red-400">拒绝：26</div><div class="px-1 mr-2 mb-1 rounded-lg bg-green-400">未接通(通话中/语音助手/在忙稍后回电): 56</div><div class="px-1 mr-2 mb-1 rounded-lg bg-yellow-400">关机/停机/空号: 14</div></div><div class="w-full mt-8 bg-white flex flex-col justify-evenly items-center"><div class="w-full pl-2 text-sm leading-10 border-b-2 text-base">客户数据</div><div class="w-full h-20 border-b-2 pl-8 text-sm text-gray-400 flex flex-col justify-evenly"><div>客户手机号：13800001111</div><div>获取数据时间：2023-08-16 09:19:38</div></div></div><div class="w-full px-6 py-3 border-b-2 bg-white flex flex-col items-center"><div class="w-full mt-1 text-sm leading-8 border-b flex justify-between"><div class="text-gray-400">已接通</div></div><div class="w-full mt-1 text-sm leading-8 border-b flex justify-between"><div class="text-green-400">已同意</div></div><div class="w-full mt-1 text-sm leading-8 border-b flex justify-between"><div class="w-4/5 text-blue-400 overflow-hidden whitespace-nowrap overflow-ellipsis">未接通(通话中/语音助手/在忙稍后回电)</div></div><div class="w-full mt-1 text-sm leading-8 border-b flex justify-between"><div class="text-red-400">拒绝</div></div><div class="w-full mt-1 text-sm leading-8 border-b flex justify-between"><div class="text-red-400">直接挂断</div></div><div class="w-full mt-1 text-sm leading-8 flex justify-between"><div class="text-yellow-400">关机/停机/空号</div></div></div><div class="w-full h-full p-2 bg-white"><textarea class="w-full h-30 text-sm border-none focus:border-none placeholder-gray-400" name="remark" cols="30" rows="3" placeholder="请输入备注信息"></textarea></div><button class="w-full mt-4 leading-8 text-sm text-gray-100 bg-blue-500 rounded-sm" type="button">确认提交</button>',5),Ht={__name:"Dashboard",props:{},setup(e){const n=b=>{console.log(b)},l=C(),i=C(!1),a=b=>{i.value=b},s=()=>{l.value=l.value.slice(0,-1)},w=()=>{};return(b,f)=>{const v=Lt,g=Kt;return ft(),st(ut,null,[o(rt(vt),{title:"工作台"}),ce("div",Rt,[o(v,{modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=k=>l.value=k),maxlength:11,show:i.value,onBlur:f[1]||(f[1]=k=>a(!1)),onDelete:s},null,8,["modelValue","show"]),o(g,{shape:"round",modelValue:l.value,"onUpdate:modelValue":f[2]||(f[2]=k=>l.value=k),"show-action":"",placeholder:"请输入手机号码",onSearch:n,onFocus:f[3]||(f[3]=k=>a(!0))},{action:ct(()=>[ce("div",{onClick:w},"搜索")]),_:1},8,["modelValue"]),$t]),o(qe,{active:0})],64)}}};export{Ht as default};
